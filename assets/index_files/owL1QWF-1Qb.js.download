if (self.CavalryLogger) { CavalryLogger.start_js(["4WMKZ"]); }

__d("EntPhotoCollageItemContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},b={defaultValue:null,kind:"LocalArgument",name:"scale"},c=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"EntPhotoCollageItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"EntPhotoCollageItem_media"}],type:"Photo",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"EntPhotoCollageItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}]},params:{id:"3678949502179069",metadata:{},name:"EntPhotoCollageItemContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoCollageItem_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"EntPhotoCollageItem_media",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("ComposerMediaDeepDiveItemQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ComposerMediaDeepDiveItemQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ComposerMediaDeepDiveItemQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"2545780295523587",metadata:{},name:"ComposerMediaDeepDiveItemQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoDeepDiveItemContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},b={defaultValue:null,kind:"LocalArgument",name:"scale"},c=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"EntPhotoDeepDiveItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"EntPhotoDeepDiveItem_media"}],type:"Photo",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"EntPhotoDeepDiveItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}]},params:{id:"2758576607601107",metadata:{},name:"EntPhotoDeepDiveItemContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoDeepDiveItem_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"EntPhotoDeepDiveItem_media",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("CometDraggableList.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useLayoutEffect,j=c.useMemo,k=c.useRef,l=c.useState;function a(a){var b=a.direction,c=b===void 0?"vertical":b,d=a.items,e=a.onReorder;b=k(null);var f=k(null),n=k(null);a=l(-1);var o=a[0],p=a[1];a=l(-1);var q=a[0],r=a[1],s=k(null),t=j(function(){return d.map(function(a,b){return{id:"item"+b,item:a}})},[d]),u=h(function(a){var b=a.currentTarget;a.dataTransfer!=null&&a.dataTransfer.setData("text/plain","This is some text");n.current={x:a.pageX,y:a.pageY};var c=b.getBoundingClientRect(),d=c.bottom,e=c.left,f=c.right;c=c.top;c=a.clientY-c;d=d-a.clientY;e=a.clientX-e;f=f-a.clientX;s.current={bottom:d,left:e,right:f,top:c};a=Number(b.dataset.key);if(isNaN(a))return;r(a)},[]),v=h(function(a){var b;a.preventDefault();a.dataTransfer!=null&&(a.dataTransfer.dropEffect="move");var d=a.currentTarget,e=Number(d.dataset.key);if(isNaN(e)||e===o)return;d=d.getBoundingClientRect();var f=m(c,a,n.current);b=(b=s.current)!=null?b:{};var g=b.bottom;g=g===void 0?0:g;var h=b.left;h=h===void 0?0:h;var i=b.right;i=i===void 0?0:i;b=b.top;b=b===void 0?0:b;c==="vertical"?f<0?a.clientY-b<d.top&&p(e):f>0&&(a.clientY+g>d.bottom&&p(e)):f<0?a.clientX-h<d.left&&p(e):f>0&&(a.clientX+i>d.right&&p(e));n.current={x:a.pageX,y:a.pageY}},[c,o]),w=h(function(a){if(o>=0&&q>=0&&o!==q){a=Array.from(d);var b=a.splice(q,1)[0];a.splice(o,0,b);e(a,q,o)}r(-1);p(-1)},[d,e,q,o]),x=h(function(a){a.stopPropagation(),a.preventDefault()},[]);a=j(function(){var a=Array.from(t);if(q>=0&&o>=0&&q!==o){var b=a.splice(q,1)[0];a.splice(o,0,b)}return a},[t,q,o]);i(function(){if(f.current==null)return;var a=f.current;for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("dragstart",u);e.addEventListener("dragover",v);e.addEventListener("dragend",w);e.addEventListener("drop",x)}return function(){if(a!=null)for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.removeEventListener("dragstart",u);e.removeEventListener("dragover",v);e.removeEventListener("dragend",w);e.removeEventListener("drop",x)}}},[a,x,w,v,u]);return g.jsx("div",{className:"l9j0dhe7 abpf7j7b ojkyduve exrn9cbp ggysqto6 rq0escxv",ref:b,style:{display:"flex",flexDirection:c==="vertical"?"column":"row"},children:a.map(function(a,b){return g.jsx("div",{className:"abiwlrkh gw4tj676 a7woen2v rq0escxv prrx4l0j"+(b===o?" jcgfde61 afxsp9o4 ed0hlay0 frvqaej8 jtyqvmfc bi3q80fp nl6ljbnk l95rl6t1 l82x9zwi uo3d90p7 pw54ja7n ue3kfks5 m6dego64 qexih2b6 rwgtamgd mut4tcmb":""),"data-key":b,draggable:!0,ref:function(a){f.current==null&&(f.current=[]),a!=null&&(f.current[b]=a)},children:g.jsx("div",{className:"rq0escxv"+(b===o?" kr9hpln1":""),children:a.item})},a.id)})})}function m(a,b,c){if(a==="vertical"){a=b.pageY-((a=c==null?void 0:c.y)!=null?a:0)}else{a=b.pageX-((b=c==null?void 0:c.x)!=null?b:0)}return a}e.exports=a}),null);
__d("CometComposerEditMediaAttachmentItemButton.react",["ix","fbt","CometPhotoEditorPage.react","React","TetraButton.react","fbicon","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.index,d=b("useCometComposerPushPage")();return i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("477825"),16),label:h._("Modifier"),onPress:function(){d!=null&&d(h._("D\u00e9tails de la photo"),function(a){a=a.onReturn;return i.jsx(b("CometPhotoEditorPage.react"),{index:c,isDialog:!0,onBack:a})},{hasCustomHeader:!0})},type:"overlay"})}e.exports=a}),null);
__d("genArrayBufferFromFile",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(b("Promise"))(function(b,c){var d=new FileReader();d.onload=function(){var a=d.result;a instanceof ArrayBuffer?b(a):c()};d.onerror=function(){c(d.error)};d.readAsArrayBuffer(a)})}e.exports=a}),null);
__d("parseIFDEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.readU16(),c=a.readU16(),d=a.readU32(),e=Object.freeze({offset:a.peekU32(),type:"offset"});switch(c){case 1:case 2:case 7:if(d<5){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readU8())}break;case 6:if(d<5){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readI8())}break;case 3:if(d<3){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readU16())}break;case 8:if(d<3){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readI16())}break;case 4:d<2&&(e={type:"data",values:[a.readU32()]});break;case 9:d<2&&(e={type:"data",values:[a.readI32()]});break;case 11:d<2&&(e={type:"data",values:[a.readF32()]});break;case 5:case 10:case 12:a.seekRelative(4);break}return{format:c,tag:b,value:e}}e.exports=a}),null);
__d("parseIFDTable",["parseIFDEntry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.readU16(),d=[];for(var e=0;e<c;e++)d.push(b("parseIFDEntry")(a));c=a.readU32();return{entries:d,nextTableOffset:c}}e.exports=a}),null);
__d("parseTIFFHeader",["EndianAwareDataReader","parseIFDTable"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c===void 0&&(c=0);var d=new Uint8Array(a,c),e=!0;if(d[0]===77&&d[1]===77)e=!1;else if(d[0]!==73||d[1]!==73)return null;d=new(b("EndianAwareDataReader"))(a,e);d.seekTo(c+2);if(d.readU16()!==42)return null;a=d.readU32();d.seekRelative(a-8);e=b("parseIFDTable")(d);return[e]}e.exports=a}),null);
__d("extractJPEGOrientationData",["genArrayBufferFromFile","parseTIFFHeader"],(function(a,b,c,d,e,f){"use strict";var g=65496,h=65498,i=1165519206;function a(a){return b("genArrayBufferFromFile")(a).then(function(a){var c=new DataView(a);if(c.getUint16(0,!1)!==g)return null;var d=2;while(d<a.byteLength-2&&c.getUint16(d)!==h){var e=c.getUint16(d),f=e&65280;e=e&255;if(f===65280)if(e===225){if(c.getUint32(d+4)!==i||c.getUint16(d+8)!==0)return null;f=b("parseTIFFHeader")(a,d+10);if(f!=null){f=f[0];for(var f=f.entries,j=Array.isArray(f),k=0,f=j?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=f.length)break;l=f[k++]}else{k=f.next();if(k.done)break;l=k.value}l=l;if(l.tag===274){l=l.value;if(l.type==="data"){l=l.values[0];if(l==null)return null;return l===0||l===1||l===2||l===3||l===4||l===5||l===6||l===7||l===8?l:null}return null}}}return null}else if(e!==0&&(e<208||e>217)){l=c.getUint16(d+2,!1);d+=l+2}}return null})}e.exports=a}),null);
__d("extractXMPMetadata",["extractUTF8StringFromBuffer","genArrayBufferFromFile"],(function(a,b,c,d,e,f){"use strict";var g=65496,h=65498,i="http://ns.adobe.com/xap/1.0/\0";function j(a,b){for(var c=0;c<i.length;c++){var d=i.charCodeAt(c);if(a.getUint8(b+c)!==d)return!1}return!0}function a(a){return b("genArrayBufferFromFile")(a).then(function(a){var c=new DataView(a);if(c.getUint16(0,!1)!==g)return null;var d=2;while(d<a.byteLength-2&&c.getUint16(d)!==h){var e=c.getUint16(d),f=e&65280;e=e&255;if(f===65280)if(e===225){if(j(c,d+4)){f=c.getUint16(d+2)-i.length-2;f=b("extractUTF8StringFromBuffer")(c.buffer,d+4+i.length,f);f.charCodeAt(f.length-1)===0&&(f=f.substr(0,f.length-1));try{var k=new DOMParser();k=k.parseFromString(f,"application/xml");return k.getElementsByTagName("parsererror").length>0?null:k}catch(a){return null}}f=c.getUint16(d+2,!1);d+=f+2}else if(e!==0&&(e<208||e>217)){k=c.getUint16(d+2,!1);d+=k+2}}return null})}e.exports=a}),null);
__d("genDimensionsFromImageFile",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=new Image(),d=new(b("Promise"))(function(a,b){c.onload=function(){a({height:c.height,width:c.width})},c.onerror=function(){b()}});a instanceof File?c.src=URL.createObjectURL(a):c.src=a;return d}e.exports=a}),null);
__d("genDimensionsFromVideoFile",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=document.createElement("video"),d=new(b("Promise"))(function(a,b){c.onloadedmetadata=function(){a({height:c.videoHeight,width:c.videoWidth})},c.onerror=function(){b()}});a instanceof File?c.src=URL.createObjectURL(a):c.src=a;return d}e.exports=a}),null);
__d("genIsHEICFile",["genArrayBufferFromFile"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=[102,116,121,112],d=[104,101,105,99],e=[104,101,105,120];return b("genArrayBufferFromFile")(a).then(function(a){a=new Uint8Array(a);var b=a.slice(4,8).reduce(function(a,b,d){return a&&b===c[d]},!0);if(!b)return!1;b=a.slice(8,12).reduce(function(a,b,c){return a&&b===d[c]},!0);if(b)return!0;b=a.slice(8,12).reduce(function(a,b,c){return a&&b===e[c]},!0);return b?!0:!1})}e.exports=a}),null);
__d("useCometComposerLoggerDispatcher",["CometComposerLoggerDispatcherContext","React"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useContext;function a(){return g(b("CometComposerLoggerDispatcherContext"))}e.exports=a}),null);
__d("usePagesCometComposerMultiMediaRestrictions",["fbt","React","cometPushToast"],(function(a,b,c,d,e,f,g){"use strict";c=b("React");var h=c.useCallback,i=b("cometPushToast").cometPushSimpleToast;function a(a,b){var c=h(function(a){a!=null&&a.map(function(a){return b({attachment:a,type:"REMOVE_MEDIA_ATTACHMENT_ITEM"})})},[b]);return h(function(){if(a!=null){var b=a.filter(function(a){return a.fileType==="PHOTO"}),d=a.filter(function(a){return a.fileType==="VIDEO"});b.length>0&&d.length>0&&(d.length===1&&d[0].state==="NEW"&&!b.some(function(a){return a.state==="NEW"})?c(b):c(d),i(g._("D\u00e9sol\u00e9, vous ne pouvez pas ajouter des photos et une vid\u00e9o en m\u00eame temps")));d.length>1&&(c(d.slice(1)),i(g._("Veuillez ne s\u00e9lectionner qu\u2019un seul fichier vid\u00e9o \u00e0 la fois.")))}},[a,c])}e.exports=a}),null);
__d("CometComposerHeadlessMediaUploaderImpl.react",["Promise","requireCond","Actor","ComposerMediaFileUploader","PagesCometComposerContext","React","cr:1506337","extractJPEGOrientationData","extractXMPMetadata","genDimensionsFromImageFile","genDimensionsFromVideoFile","genIsHEICFile","gkx","promiseDone","qex","recoverableViolation","useCometComposerLoggerDispatcher","usePagesCometComposerMultiMediaRestrictions"],(function(a,b,c,d,e,f){"use strict";var g=b("Actor").useActor;b("React");c=b("React");var h=c.useCallback,i=c.useContext,j=c.useEffect,k=b("qex")._("1221850")===!0;function a(a){var c=a.creationSessionID,d=a.dispatch,e=a.mediaAttachments,f=a.mediaUploadStatuses;a=a.videoUploaderConfig;var l=b("useCometComposerLoggerDispatcher")(),m=i(b("PagesCometComposerContext")),n=g();n=n[0];var o=b("usePagesCometComposerMultiMediaRestrictions")(e,d),p=b("ComposerMediaFileUploader").createOrGetInstance(n,a,c),q=h(function(a){d(babelHelpers["extends"]({type:"MEDIA_UPLOAD_STARTED"},a)),l({fields:{media_id:a.uploadID},type:"MEDIA_UPLOAD_TRANSFER_START"})},[d,l]),r=h(function(a){d(babelHelpers["extends"]({type:"MEDIA_UPLOAD_PROGRESS"},a))},[d]),s=h(function(a){var b=f&&f[a.uploadID];b!=null&&b.resolveFileUpload({attachmentID:a.entID,attachmentType:a.attachmentType})},[f]),t=h(function(a){d({entID:a.entID,imageURL:a.attachmentType==="PHOTO"?a.imageURL:void 0,type:"MEDIA_UPLOAD_SUCCESSFUL",uploadID:a.uploadID}),l({fields:{media_id:a.uploadID,media_item_fbid:a.entID},type:"MEDIA_UPLOAD_TRANSFER_SUCCESS"}),l({fields:{media_id:a.uploadID,media_item_fbid:a.entID,media_type:a.attachmentType},type:"MEDIA_UPLOAD_SUCCESS"}),l({fields:{media_id:a.uploadID,media_item_fbid:a.entID,media_type:a.attachmentType},type:"MEDIA_UPLOAD_FLOW_SUCCESS"})},[d,l]),u=h(function(a){d(babelHelpers["extends"]({type:"MEDIA_UPLOAD_FAILED"},a)),l({fields:{media_id:a.uploadID},type:"MEDIA_UPLOAD_FAILURE"})},[d,l]);j(function(){m!=null&&e!=null&&o();p.startedObserver.subscribe(q);p.progressObserver.subscribe(r);p.successObserver.subscribe(t);p.errorObserver.subscribe(u);k&&p.successObserver.subscribe(s);return function(){p.startedObserver.unsubscribe(q),p.progressObserver.unsubscribe(r),p.successObserver.unsubscribe(t),p.errorObserver.unsubscribe(u)}});var v=function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"&&a.fileType!=="UNKNOWN"?[a.file,a.fileType]:null},w=h(function(a){var b=a.map(function(a){return a.file&&((a=a.file)==null?void 0:a.uploadID)}).filter(Boolean);d({type:"MARK_UPLOADS_CLIENT_PROCESSING",uploadIDs:b});a.forEach(function(a){var b;return l({fields:{media_id:(b=(b=a.file)==null?void 0:b.uploadID)!=null?b:"",media_type:a.fileType},type:"MEDIA_UPLOAD_PROCESS_START"})})},[d,l]),x=h(function(a){var c=a.file;if(c)return b("genIsHEICFile")(c).then(function(e){e&&d({type:"MARK_UPLOADS_AS_PHOTO",uploadIDs:[c==null?void 0:c.uploadID].filter(Boolean)});return b("Promise").resolve(a)});else return b("Promise").resolve(a)},[d]),y=h(function(a){var c=a.file;return c?b("extractJPEGOrientationData")(c).then(function(c){c!=null&&c>0&&d({attachment:a,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"});return b("Promise").resolve(a)})["catch"](function(c){b("recoverableViolation")("An error occurred when parsing an uploaded image","comet_composer",{error:c});return b("Promise").resolve(a)}):b("Promise").resolve(a)},[d]),z=h(function(a){var c=a.file,e=!1;return c&&b("gkx")("1563354")?b("extractXMPMetadata")(c).then(function(c){if(c!=null){var f=c.getElementsByTagName("GPano:UsePanoramaViewer")[0];f!=null&&f.textContent==="True"&&(e=!0);f=c.getElementsByTagName("rdf:Description")[0];if(f!=null){c=f.getAttribute("GPano:UsePanoramaViewer");c!=null&&c==="True"&&(e=!0)}}if(e){d({attachment:a,hasSphericalMetadata:e,type:"SET_MEDIA_ATTACHMENT_ITEM_HAS_SPHERICAL_METADATA"});return b("Promise").resolve(a)}})["catch"](function(c){b("recoverableViolation")("An error occurred when parsing an uploaded image","comet_composer",{error:c});return b("Promise").resolve(a)}):b("Promise").resolve(a)},[d]),A=h(function(a){var c=a.file?a.file:void 0,e=a.fileObjectURL,f;if(e!=null)switch(a.fileType){case"PHOTO":f=b("genDimensionsFromImageFile")(e);break;case"VIDEO":f=b("genDimensionsFromVideoFile")(e);break}else if(c!=null)switch(a.fileType){case"PHOTO":f=b("genDimensionsFromImageFile")(c);break;case"VIDEO":f=b("genDimensionsFromVideoFile")(c);break}else f=b("Promise").resolve({height:0,width:0});if(f!=null)return f.then(function(b){var c=b.height;b=b.width;d({attachment:a,height:c,type:"SET_MEDIA_ATTACHMENT_ITEM_DIMENSIONS",width:b})},function(){d({attachment:a,height:0,type:"SET_MEDIA_ATTACHMENT_ITEM_DIMENSIONS",width:0})})},[d]),B=h(function(){var a=(e||[]).map(function(a){return a.state==="NEW"?a:null}).filter(Boolean);a.forEach(function(a){var c=a.file.uploadID;c!=null&&(l({fields:{media_id:c,media_type:a.fileType},type:"MEDIA_UPLOAD_FLOW_START"}),l({fields:{media_id:c,media_type:a.fileType},type:"MEDIA_UPLOAD_START"}));c=[];w([a]);a.fileType==="UNKNOWN"&&a.file?c.push(x(a)):a.fileType==="PHOTO"&&(c.push(y(a)),c.push(z(a)));c.push(A(a));b("promiseDone")(b("Promise").all(c).then(function(){var b=[a.file.uploadID].filter(Boolean),c=a.fileType;d({type:"MEDIA_ATTACHMENT_CLIENT_PROCESSING_COMPLETED",uploadIDs:b});b.forEach(function(a){return l({fields:{media_id:a,media_type:c},type:"MEDIA_UPLOAD_PROCESS_SUCCESS"})})}))})},[A,x,y,z,d,l,w,e]),C=h(function(){if(e!=null&&e.some(function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"})){var a=e.filter(function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"}).map(v).filter(Boolean);a.length>0&&(d({type:"QUEUE_UPLOADS",uploadIDs:a.map(function(a){var b=a[0];a[1];return b==null?void 0:b.uploadID}).filter(Boolean)}),p.upload(a))}},[p,d,e]),D=h(function(){b("cr:1506337")!==null&&b("cr:1506337")(e,d)},[d,e]);j(function(){B(),C(),b("gkx")("1488423")&&D()},[B,C,D]);return null}e.exports=a}),null);
__d("CometComposerHeadlessMediaUploader.react",["Actor","CometComposerHeadlessMediaUploaderImpl.react","React","qex","useComposerVideoUploaderConfig","useComposerViewStateDispatcher","withComposerViewStatePart"],(function(a,b,c,d,e,f){"use strict";var g=b("Actor").useActor,h=b("React");c=b("React");var i=c.useMemo,j=b("qex")._("1526734")===!0;function a(a){var c=a.creationSessionID,d=a.mediaAttachments,e=a.mediaUploadLoggingMetadata,f=e.composerEntrypoint,k=e.source;e=a.mediaUploadStatuses;a=b("useComposerViewStateDispatcher")();var l=g();l=l[0];var m=b("useComposerVideoUploaderConfig")(l),n=j&&f==="feed";l=i(function(){return babelHelpers["extends"]({},m,{composer_entry_point_ref:f,silent_file_validation:n,source:k})},[f,n,k,m]);return h.jsx(b("CometComposerHeadlessMediaUploaderImpl.react"),{creationSessionID:c,dispatch:a,mediaAttachments:d,mediaUploadStatuses:e,videoUploaderConfig:l})}e.exports=b("withComposerViewStatePart")(a,function(a){return{creationSessionID:a.creationSessionID,mediaAttachments:a.mediaAttachments,mediaUploadStatuses:a.mediaUploadStatuses}})}),null);
__d("CometComposerRemoveMediaAttachmentItemButton.react",["ix","fbt","React","TetraCircleButton.react","fbicon","isMimeTypeForMedia","stylex","useComposerViewStateDispatcher"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("React");var j=c.useCallback,k=b("isMimeTypeForMedia").isMimeTypeForPhoto;function a(a){var c=a.attachment,d=b("useComposerViewStateDispatcher")();a=j(function(){d({attachment:c,type:"REMOVE_MEDIA_ATTACHMENT_ITEM"})},[c,d]);return i.jsx("div",{className:"a7x4jqbc gwewmpg2 pmk7jnqg jaqpu5ht",children:i.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(g("478238"),20),label:k(c==null?void 0:c.fileType)?h._("Supprimer la photo"):h._("Supprimer la vid\u00e9o"),onPress:a,size:36,type:"overlay"})})}e.exports=a}),null);
__d("EntPhotoCollageItem.react",["CometBackgroundImage.react","CometRelay","React","composerMediaAttachmentReducer","useComposerViewStateDispatcher","useComposerViewStateReducer","EntPhotoCollageItem_media.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("React");c=b("React");var j=c.useEffect;function a(a){var c;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")(),e=h(g!==void 0?g:g=b("EntPhotoCollageItem_media.graphql"),a.media);j(function(){var b,c;b=e==null?void 0:(b=e.image)==null?void 0:b.height;c=e==null?void 0:(c=e.image)==null?void 0:c.width;b!=null&&c!=null&&d({entID:a.id,height:b,type:"SET_MEDIA_ATTACHMENT_ITEM_CDN_DIMENSIONS",width:c})},[e,d,a.id]);c=e==null?void 0:(c=e.image)==null?void 0:c.uri;return c!=null?i.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c}):null}e.exports=a}),null);
__d("EntPhotoCollageItemContainer.react",["CometRelay","EntPhotoCollageItem.react","React","WebPixelRatio","EntPhotoCollageItemContainerQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useLazyLoadQuery,i=b("React");function a(a){var c=h(g!==void 0?g:g=b("EntPhotoCollageItemContainerQuery.graphql"),{id:a.id,scale:b("WebPixelRatio").get()});return i.jsx(b("EntPhotoCollageItem.react"),{id:a.id,media:c==null?void 0:c.node})}e.exports=a}),null);
__d("CDNPreviewPhotoCollageItem.react",["CollageItemFallback.react","CometPlaceholder.react","EntPhotoCollageItemContainer.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.entID,d=a.filename,e=a.fileType;a=a.percentComplete;e=g.jsx(b("CollageItemFallback.react"),{fileType:e,filename:d,percentComplete:a});if(c!=null)return g.jsx(b("CometPlaceholder.react"),{fallback:e,children:g.jsx(b("EntPhotoCollageItemContainer.react"),{id:c})});else return e}e.exports=a}),null);
__d("OptimisticallyUploadedPhotoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CometBackgroundImage.react","JSResource","PlayableCollageItemOverlay.react","React","composerMediaAttachmentReducer","lazyLoadComponent","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("OptimisticallyUploadedPhotoCollageItem.react"));function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.hasSphericalMetadata===!0?g.jsx(h,{}):null;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx(b("CometBackgroundImage.react"),{draggable:!1,onError:function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:c.fileObjectURL}),c.fileType==="VIDEO"?g.jsx(b("PlayableCollageItemOverlay.react"),{}):null,a]}):g.jsxs(g.Fragment,{children:[g.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.entID,fileType:c.fileType,filename:c.fileName,percentComplete:c.percentComplete}),a]})}e.exports=a}),null);
__d("OptimisticallyUploadedVideoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CircularProgressBar.react","PlayableCollageItemOverlay.react","React","composerMediaAttachmentReducer","stylex","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.fileObjectURL;var e=c.percentComplete;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx("video",{className:"k4urcfbm bixrwtb6 datstx6m",onLoadedMetadata:function(a){a.target.videoWidth===0&&a.target.videoHeight===0&&d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:a}),g.jsx(b("PlayableCollageItemOverlay.react"),{}),e!=null&&g.jsx(b("CircularProgressBar.react"),{percentComplete:e*100})]}):g.jsx(b("CDNPreviewPhotoCollageItem.react"),{fileType:c.fileType,filename:c.fileName,percentComplete:c.percentComplete})}e.exports=a}),null);
__d("OptimisticallyUploadedCollageItem.react",["OptimisticallyUploadedPhotoCollageItem.react","OptimisticallyUploadedVideoCollageItem.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=a.attachment;var c=a.fileType==="PHOTO"||a.fileType==="UNKNOWN"||a.fileType==="VIDEO"&&a.fileMimeType==="image/gif";return c?g.jsx(b("OptimisticallyUploadedPhotoCollageItem.react"),{attachment:a}):g.jsx(b("OptimisticallyUploadedVideoCollageItem.react"),{attachment:a})}e.exports=a}),null);
__d("UploadingOrUploadedPhotoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CometBackgroundImage.react","CometPlaceholder.react","JSResource","PlayableCollageItemOverlay.react","React","composerMediaAttachmentReducer","lazyLoadComponent","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("UploadingOrUploadedPhotoCollageItem.react"));function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.hasSphericalMetadata===!0?g.jsx(b("CometPlaceholder.react"),{fallback:null,children:g.jsx(h,{})}):null;var e=c.file;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx(b("CometBackgroundImage.react"),{alt:e.name,draggable:!1,onError:function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:c.fileObjectURL}),c.fileType==="VIDEO"?g.jsx(b("PlayableCollageItemOverlay.react"),{}):null,a]}):g.jsxs(g.Fragment,{children:[g.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.state==="UPLOADED"?c.entID:void 0,fileType:c.fileType,filename:e.name}),a]})}e.exports=a}),null);
__d("CDNPreviewVideoCollageItem.react",["CollageItemFallback.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.filename;a=a.fileType;return g.jsx(b("CollageItemFallback.react"),{fileType:a,filename:c})}e.exports=a}),null);
__d("UploadingOrUploadedVideoCollageItem.react",["CDNPreviewVideoCollageItem.react","PlayableCollageItemOverlay.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=a.attachment;if(a.fileType==="VIDEO"){var c=a.file;return a.fileObjectURL!=null&&a.useCDNPreview!==!0?g.jsxs(g.Fragment,{children:[g.jsx("video",{className:"k4urcfbm bixrwtb6 datstx6m",src:a.fileObjectURL}),g.jsx(b("PlayableCollageItemOverlay.react"),{})]}):g.jsx(b("CDNPreviewVideoCollageItem.react"),{entID:a.state==="UPLOADED"?a.entID:void 0,fileType:a.fileType,filename:c.name})}else return null}e.exports=a}),null);
__d("UploadingOrUploadedCollageItem.react",["React","UploadingOrUploadedPhotoCollageItem.react","UploadingOrUploadedVideoCollageItem.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=a.attachment;var c=a.fileType==="PHOTO"||a.fileType==="VIDEO"&&a.file.type==="image/gif";return c?g.jsx(b("UploadingOrUploadedPhotoCollageItem.react"),{attachment:a}):g.jsx(b("UploadingOrUploadedVideoCollageItem.react"),{attachment:a})}e.exports=a}),null);
__d("CometComposerMediaAttachmentItem.react",["CollageItemFallback.react","CometBackgroundImage.react","CometComposerRemoveMediaAttachmentItemButton.react","CometPlaceholder.react","JSResource","OptimisticallyUploadedCollageItem.react","PlayableCollageItemOverlay.react","React","TetraText.react","UploadingOrUploadedCollageItem.react","lazyLoadComponent","qex","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("lazyLoadComponent")(b("JSResource")("CometComposerSphericalMediaGyroIndicator.react").__setRef("CometComposerMediaAttachmentItem.react")),j=b("qex")._("1138950");function a(a){var c=a.attachment;a=a.withRemoveButton;a=a===void 0?!0:a;var d=c.hasSphericalMetadata===!0?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{})}):null;switch(c.state){case"PREEXISTING":return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},j===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv"}),children:[c.fileType!=="VIDEO"?h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c.url}):h.jsxs(h.Fragment,{children:[h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c.imageURL}),h.jsx(b("PlayableCollageItemOverlay.react"),{})]}),a?h.jsx(b("CometComposerRemoveMediaAttachmentItemButton.react"),{attachment:c}):null,d]});case"NEW":case"CLIENT_PROCESSING":case"CLIENT_PROCESSING_COMPLETE":return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},j===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv"}),children:[h.jsx(b("CollageItemFallback.react"),{fileType:c.fileType,filename:c.file.name}),d]});case"QUEUED":case"UPLOADING":case"UPLOADED":if(c.file!=null){d=a?h.jsx(b("CometComposerRemoveMediaAttachmentItemButton.react"),{attachment:c}):null;return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},j===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv"}),children:[h.jsx(b("UploadingOrUploadedCollageItem.react"),{attachment:c}),c.state==="UPLOADED"?d:h.jsx("div",{className:"g7nl5sj3 kr520xx4 pmk7jnqg datstx6m n7fi1qx3 cxbav39q",style:{width:(1-(c.percentComplete||0))*100+"%"},children:d})]})}else return null;case"FAILED":return h.jsxs("div",{className:(g||(g=b("stylex"))).dedupe({"border-top-color-0.4":"jw3uvs1e","border-end-color-0.4":"hmw3o7ox","border-bottom-color-0.4":"ku5f423u","border-start-color-0.4":"a64ryyup"},{"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},j===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv","border-top-color-0.4":null,"border-bottom-color-0.4":null}),children:[c.file.name,c.error!=null?h.jsxs(h.Fragment,{children:[h.jsx("br",{}),h.jsx(b("TetraText.react"),{color:"negative",type:"body4",children:c.error})]}):null]});case"OPTIMISTIC_UPLOADED":if(c.fileObjectURL!=null)return h.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},j===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv"}),children:h.jsx(b("OptimisticallyUploadedCollageItem.react"),{attachment:c})});else return null}return null}e.exports=a}),null);
__d("ComposerMediaDeepDiveCaptionEditor.react",["fbt","CometFormTextArea.react","React","composerMediaAttachmentReducer","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.mediaAttachmentItem;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();return h.jsx(b("CometFormTextArea.react"),{label:g._("L\u00e9gende"),maxRows:2,minRows:2,onValueChange:function(a){d({attachment:c,caption:a,type:"SET_MEDIA_ATTACHMENT_CAPTION"})},value:c.fileType==="PHOTO"||c.fileType==="VIDEO"?((a=c.data)==null?void 0:(a=a.message)==null?void 0:a.text)||"":""})}e.exports=a}),null);
__d("ComposerMediaDeepDiveMetadataPill.react",["CometPressable.react","React","TetraIcon.react","TetraText.react","stylex"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useState;function a(a){var c=h(!1),d=c[0],e=c[1];return g.jsx("div",{children:g.jsx(b("CometPressable.react"),{"aria-label":a.label,onHoverIn:function(){e(!0)},onHoverOut:function(){return e(!1)},onPress:a.onPress,overlayDisabled:!0,children:g.jsxs("div",{className:"pcp91wgn iuny7tx3 p8fzw8mz ipjc6fyt qjjbsfad j83agx80 qrtewk5h lsl2245n hqlzco19 o3c63hce lit7pgxp d6rk862h bp9cbjyn",children:[g.jsx(b("TetraIcon.react"),{color:"white",icon:a.icon}),d||Boolean(a.shouldAlwaysShowLabel)?g.jsx("div",{className:"pcp91wgn buofh1pr rj1gh0hx",children:g.jsx(b("TetraText.react"),{color:"white",type:"body4",children:a.label})}):null]})})})}e.exports=a}),null);
__d("ComposerMediaDeepDiveTagProducts.react",["ix","fbt","CometPhotoEditorPage.react","ComposerMediaDeepDiveMetadataPill.react","React","fbicon","intlList","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=b("useCometComposerPushPage")(),d=a.mediaAttachment.fileType==="PHOTO"?(a.mediaAttachment.data.tags||[]).map(function(a){return a==null?void 0:(a=a.taggee)==null?void 0:a.name}).filter(Boolean):null,e=h._("Identifier des produits"),f=!1;d&&d.length>0&&(f=!0,e=b("intlList")(d));return a.mediaAttachment.fileType==="PHOTO"?i.jsx(b("ComposerMediaDeepDiveMetadataPill.react"),{icon:b("fbicon")._(g("697799"),12),label:e,onPress:function(){c!=null&&c(h._("D\u00e9tails de la photo"),function(c){c=c.onReturn;return i.jsx(b("CometPhotoEditorPage.react"),{index:a.index,initialTool:"PRODUCT_TAG",isDialog:!0,onBack:c})},{hasCustomHeader:!0})},shouldAlwaysShowLabel:f}):null}e.exports=a}),null);
__d("ComposerMediaDeepDiveTaggedPeople.react",["ix","fbt","CometPhotoEditorPage.react","ComposerMediaDeepDiveMetadataPill.react","React","fbicon","intlList","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=b("useCometComposerPushPage")(),d=a.mediaAttachment.fileType==="PHOTO"?(a.mediaAttachment.data.tags||[]).map(function(a){return a==null?void 0:(a=a.taggee)==null?void 0:a.name}).filter(Boolean):null,e=h._("Identifier la photo"),f=!1;d&&d.length>0&&(f=!0,e=b("intlList")(d));return i.jsx(b("ComposerMediaDeepDiveMetadataPill.react"),{icon:b("fbicon")._(g("502469"),12),label:e,onPress:function(){c!=null&&c(h._("D\u00e9tails de la photo"),function(c){c=c.onReturn;return i.jsx(b("CometPhotoEditorPage.react"),{index:a.index,initialTool:"XY_TAG",isDialog:!0,onBack:c})},{hasCustomHeader:!0})},shouldAlwaysShowLabel:f})}e.exports=a}),null);
__d("DeepDiveImageFilePreview.react",["BaseImage.react","CometBlurredBackgroundImage.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={image:{height:"datstx6m",objectFit:"r0294ipz",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",width:"k4urcfbm"},root:{backgroundColor:"pgeiv1et",position:"l9j0dhe7"}};function a(a){var c=a.blurredBackground,d=a.fileName,e=a.uri;a=a.xstyle;return h.jsxs("div",{className:(g||(g=b("stylex")))(i.root,a),children:[c===!0&&h.jsx(b("CometBlurredBackgroundImage.react"),{draggable:!1,src:e}),h.jsx(b("BaseImage.react"),{alt:d,draggable:!1,src:e,xstyle:i.image})]})}e.exports=a}),null);
__d("EntPhotoDeepDiveItem.react",["CometRelay","DeepDiveImageFilePreview.react","React","EntPhotoDeepDiveItem_media.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("React");function a(a){var c=a.media;a=babelHelpers.objectWithoutPropertiesLoose(a,["media"]);c=h(g!==void 0?g:g=b("EntPhotoDeepDiveItem_media.graphql"),c);c=c==null?void 0:(c=c.image)==null?void 0:c.uri;return c!=null?i.jsx(b("DeepDiveImageFilePreview.react"),babelHelpers["extends"]({uri:c},a)):null}e.exports=a}),null);
__d("EntPhotoDeepDiveItemContainer.react",["CometRelay","EntPhotoDeepDiveItem.react","React","WebPixelRatio","EntPhotoDeepDiveItemContainerQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useLazyLoadQuery,i=b("React");function a(a){var c=a.fileName,d=a.id;a=a.xstyle;d={id:d,scale:b("WebPixelRatio").get()};d=h(g!==void 0?g:g=b("EntPhotoDeepDiveItemContainerQuery.graphql"),d);return i.jsx(b("EntPhotoDeepDiveItem.react"),{blurredBackground:!0,fileName:c,media:d==null?void 0:d.node,xstyle:a})}e.exports=a}),null);
__d("ComposerMediaDeepDiveItem.react",["Actor","CollageItemFallback.react","CometComposerEditMediaAttachmentItemButton.react","CometComposerRemoveMediaAttachmentItemButton.react","CometComposerVideoPreview.react","CometPlaceholder.react","CometRelay","ComposerMediaDeepDiveCaptionEditor.react","ComposerMediaDeepDiveTaggedPeople.react","ComposerMediaDeepDiveTagProducts.react","DeepDiveImageFilePreview.react","EntPhotoDeepDiveItemContainer.react","React","gkx","recoverableViolation","stylex","ComposerMediaDeepDiveItemQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("Actor").useActor;b("CometRelay").graphql;var j=b("CometRelay").useLazyLoadQuery,k=b("React");c=b("React");var l=c.useState,m={captionArea:{backgroundColor:"cwj9ozl2",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr"},editMediaButton:{position:"pmk7jnqg",start:"rnx8an3s",top:"fcg2cn6m"},imageArea:{height:"djkytl3r"},mediaAndMetadata:{position:"l9j0dhe7"},metadataArea:{bottom:"d2iitwg3",marginEnd:"tvfksri0",position:"pmk7jnqg",start:"rnx8an3s"},removeItemButton:{end:"swmj3c3o",position:"pmk7jnqg",top:"fcg2cn6m"},root:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"ad9n1n66",marginBottom:"sjgh65i0",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7"}};function a(a){var c,d=a.itemIndex,e=a.mediaAttachment;a=l(!1);var f=a[0],n=a[1];a=i();a=j(g!==void 0?g:g=b("ComposerMediaDeepDiveItemQuery.graphql"),{id:a[0]});var o=(a==null?void 0:(a=a.page)==null?void 0:a.has_taggable_products)===!0;a=function(a){return k.jsxs("div",{className:(h||(h=b("stylex")))(m.root),onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:[k.jsxs("div",{className:h(m.mediaAndMetadata),children:[a,k.jsx("div",{className:h(m.metadataArea),children:b("gkx")("1218176")&&o===!0?k.jsx(b("ComposerMediaDeepDiveTagProducts.react"),{index:d,mediaAttachment:e}):k.jsx(b("ComposerMediaDeepDiveTaggedPeople.react"),{index:d,mediaAttachment:e})})]}),f?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:(h||(h=b("stylex")))(m.editMediaButton),children:k.jsx(b("CometComposerEditMediaAttachmentItemButton.react"),{index:d})}),k.jsx("div",{className:(h||(h=b("stylex")))(m.removeItemButton),children:k.jsx(b("CometComposerRemoveMediaAttachmentItemButton.react"),{attachment:e})})]}):null,k.jsx("div",{className:h(m.captionArea),children:k.jsx(b("ComposerMediaDeepDiveCaptionEditor.react"),{mediaAttachmentItem:e})})]})};var p;if(e.state==="CLIENT_PROCESSING"||e.state==="CLIENT_PROCESSING_COMPLETE")return k.jsx("div",{className:(h||(h=b("stylex")))(m.imageArea),children:k.jsx(b("CollageItemFallback.react"),{fileType:e.fileType})});else if(e.state==="PREEXISTING"){var q=k.jsx("div",{className:(h||(h=b("stylex")))(m.imageArea),children:k.jsx(b("CollageItemFallback.react"),{fileType:e.fileType})});switch(e.fileType){case"PHOTO":p=e.entID!=null?k.jsx(b("CometPlaceholder.react"),{fallback:q,children:k.jsx(b("EntPhotoDeepDiveItemContainer.react"),{id:e.entID,xstyle:m.imageArea})}):null;break;case"VIDEO":p=k.jsx(b("CometComposerVideoPreview.react"),{mediaAttachment:e});break;case"UNKNOWN":b("recoverableViolation")("`UNKNOWN` media attachment in composer media deep dive","comet_composer");p=null;break}return a(p)}else if(e.file&&e.fileObjectURL!=null){switch(e.fileType){case"PHOTO":switch(e.useCDNPreview){case!0:q=k.jsx("div",{className:(h||(h=b("stylex")))(m.imageArea),children:k.jsx(b("CollageItemFallback.react"),{fileType:e.fileType,filename:(q=e.file)==null?void 0:q.name,percentComplete:e.state==="UPLOADING"?e.percentComplete:void 0})});switch(e.state){case"UPLOADED":p=e.entID!=null?k.jsx(b("CometPlaceholder.react"),{fallback:q,children:k.jsx(b("EntPhotoDeepDiveItemContainer.react"),{fileName:(c=e.file)==null?void 0:c.name,id:e.entID,xstyle:m.imageArea})}):null;break;default:p=q;break}break;default:p=k.jsx(b("DeepDiveImageFilePreview.react"),{blurredBackground:!0,fileName:(c=e.file)==null?void 0:c.name,uri:e.fileObjectURL,xstyle:m.imageArea})}break;case"VIDEO":e.file.type==="image/gif"?p=k.jsx(b("DeepDiveImageFilePreview.react"),{fileName:e.file.name,uri:e.fileObjectURL,xstyle:m.imageArea}):p=k.jsx(b("CometComposerVideoPreview.react"),{mediaAttachment:e});break;case"FILE":case"UNKNOWN":p=null}return a(p)}else return null}e.exports=a}),null);
__d("ComposerMediaDeepDive.react",["ix","fbt","CometDraggableList.react","CometFileSelector.react","CometRow.react","CometRowItem.react","CometScrollableArea.react","ComposerMediaDeepDiveItem.react","React","TetraButton.react","composerMediaAttachmentReducer","composerMediaAttachmentUtils","fbicon","fileInputAcceptValues","stylex","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");c=b("React");var k=c.useCallback,l=b("composerMediaAttachmentUtils").getIDFromMediaAttachment,m={items:{backgroundColor:"g6srhlxm",flexGrow:"buofh1pr",flexShrink:"g5gj957u",paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"qt6c0cv9",paddingStart:"dati1w0a"},root:{display:"j83agx80",flexDirection:"cbu4d94t",maxHeight:"f0kvp8a6",width:"oh7imozk"},toolbar:{borderTop:"dwg5866k",paddingTop:"pybr56ya",paddingEnd:"ph5uu5jm",paddingBottom:"f10w8fjw",paddingStart:"b3onmgus"}};function a(a){var c=a.mediaAttachments,d=a.popPage;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var e=b("useComposerViewStateDispatcher")();a=k(function(a,b,c){e({sourceIndex:b,targetIndex:c,type:"REORDER_MEDIA_ATTACHMENT_ITEM"})},[e]);var f=function(a){a.length>0&&e({files:Array.from(a),type:"ADD_MEDIA_ATTACHMENT_ITEMS"})};return j.jsxs("div",{className:(i||(i=b("stylex")))(m.root),children:[j.jsx(b("CometScrollableArea.react"),{horizontal:!1,xstyle:m.items,children:j.jsx(b("CometDraggableList.react"),{items:(c||[]).map(function(a,c){return a.file||a.useCDNPreview?j.jsx(b("ComposerMediaDeepDiveItem.react"),{itemIndex:c,mediaAttachment:a},"media-"+(l(a)||c)):null}).filter(Boolean),onReorder:a})}),j.jsx("div",{className:i(m.toolbar),children:j.jsxs(b("CometRow.react"),{align:"end",paddingTop:0,children:[j.jsx(b("CometRowItem.react"),{children:j.jsx(b("CometFileSelector.react"),{accept:b("fileInputAcceptValues").PHOTO_AND_VIDEO,multiple:!0,onFilesSelected:f,children:function(a){return j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("481773"),16),label:h._("Ajouter des photos\/vid\u00e9os"),onPress:a,reduceEmphasis:!0,type:"secondary"})}})}),j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraButton.react"),{label:h._("OK"),onPress:function(){d()},padding:"wide",type:"primary"})})]})})]})}e.exports=b("withComposerViewStatePart")(a,function(a){return{mediaAttachments:a.mediaAttachments}})}),null);
__d("ComposerCometOpenMediaDeepDiveButton.react",["ix","fbt","CometComposerPushPageContext","ComposerMediaDeepDive.react","React","TetraButton.react","fbicon","useCometComposerPushPage"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=b("useCometComposerPushPage")();return i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("477825"),16),label:h._("Tout modifier"),onPress:function(){c&&c(h._("Toutes les photos"),function(a){a=a.onReturn;return i.jsx(b("CometComposerPushPageContext").Provider,{value:c,children:i.jsx(b("ComposerMediaDeepDive.react"),{popPage:a})})})},type:"overlay"})}e.exports=a}),null);
__d("useMediaCollage",["CollageLayoutConfig","CometFeedStoryMediaLayoutConstants","React","ReactComposerCollageLayoutSelection"],(function(a,b,c,d,e,f){"use strict";var g=b("CometFeedStoryMediaLayoutConstants").DEFAULT_MIN_ASPECT_RATIO;c=b("React");var h=c.useCallback,i=c.useEffect,j=c.useRef,k=c.useState;function a(a,c,d){var e=k(null),f=e[0],l=e[1];e=j(new Map());a=a.reduce(function(b,c,a){c.width!=null&&c.height!=null?b.set(a,[c.width,c.height]):b.set(a,[0,0]);return b},new Map());if(a.size!==e.current.size)e.current=a;else{var m=!1;for(var n=a,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}q=q;var r=q[0];q=q[1];var s=q[0];q=q[1];r=e.current.get(r)||[void 0,void 0];var t=r[0];r=r[1];m=m||s!==t||q!==r}m&&(e.current=a)}var u=e.current,v=h(function(){if(u.size===1){var a=u.get(0)||[400,400];a=Math.max(a[0]/a[1],g);l(new(b("CollageLayoutConfig"))([{height:1,width:1,x:0,y:0}],c,d,c/a))}else if(u.size>1){a=b("ReactComposerCollageLayoutSelection").getBestUserCollageLayout(u);var e=[];a.forEach(function(a,b){e.push({height:a.getHeight(),width:a.getWidth(),x:a.getLeft(),y:a.getTop()})});l(new(b("CollageLayoutConfig"))(e,c,d))}else l(null)},[c,u,d]);i(function(){u.size>0&&v()},[v,u]);return f}e.exports=a}),null);
__d("ComposerCometMediaAttachmentCollage.react",["ix","fbt","CometComposerEditMediaAttachmentItemButton.react","CometComposerHeadlessMediaUploader.react","CometComposerMediaAttachmentItem.react","CometFileSelector.react","CometPlaceholder.react","CometRow.react","CometRowItem.react","ComposerCometOpenMediaDeepDiveButton.react","React","TetraButton.react","composerMediaAttachmentReducer","fbicon","fileInputAcceptValues","stylex","useComposerViewStateDispatcher","useComposerViewStateReducer","useMediaCollage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React");c=b("React");var k=c.useState,l=5;d=500;f=16;c=1;var m=d-f*2-c*2,n=466;function a(a){var c=a.disableVideoUploads,d=a.mediaAttachments,e=a.mediaUploadLoggingMetadata,f=a.removeBorderRadiusBottomStyle;f=f===void 0?!1:f;var o=a.inComposer,p=a.withoutUploader;a=a.width;a=a===void 0?m:a;var q=k(!1),r=q[0],s=q[1];q=b("useMediaCollage")(d,a,2);a=q!=null?q.getItemStyleInfos():[];var t=(d||[]).length-a.length;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var u=b("useComposerViewStateDispatcher")(),v=function(a){a.length>0&&u({files:Array.from(a),type:"ADD_MEDIA_ATTACHMENT_ITEMS"})};c=c!==!0?b("fileInputAcceptValues").PHOTO_AND_VIDEO:b("fileInputAcceptValues").PHOTO;return j.jsxs("div",{className:(i||(i=b("stylex"))).dedupe({"border-top-start-radius-1":"ue3kfks5","border-top-end-radius-1":"pw54ja7n","border-bottom-end-radius-1":"uo3d90p7","border-bottom-start-radius-1":"l82x9zwi","overflow-x-1":"ni8dbmo4","overflow-y-1":"stjgntxs","position-1":"l9j0dhe7","width-1":"k4urcfbm"},o?null:{"border-top-0.3":"qu0x051f","border-end-0.3":"esr5mh6w","border-bottom-0.3":"e9989ue4","border-start-0.3":"r7d6kgcz","border-top-start-radius-1":"monazrh9","border-top-end-radius-1":"h905i5nu","border-bottom-end-radius-1":"jinzq4gt","border-bottom-start-radius-1":"mrjvor2e"},f?{"border-bottom-end-radius-1":"jinzq4gt","border-bottom-start-radius-1":"mrjvor2e"}:null),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},style:{height:q!=null?q.getCalculatedHeight()+"px":n},children:[p!==!0&&j.jsx(b("CometPlaceholder.react"),{fallback:null,children:j.jsx(b("CometComposerHeadlessMediaUploader.react"),{mediaUploadLoggingMetadata:e})}),a.map(function(a,c){var e=(d||[])[c];if(e==null)return null;var f=c===l-1&&t>0;return j.jsxs("div",{className:"pmk7jnqg stjgntxs ni8dbmo4 taijpn5t j83agx80 bp9cbjyn","data-testid":void 0,style:a,children:[j.jsx(b("CometComposerMediaAttachmentItem.react"),{attachment:e,index:c,withRemoveButton:!1},"media-"+c),f?j.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg taijpn5t cbu4d94t n7fi1qx3 j83agx80 i09qtzwb sx5rzos5 bp9cbjyn",children:j.jsx("div",{className:"oqcyycmt lrazzd5p mhxlubs3 qrtewk5h",children:h._("+{num}",[h._param("num",t+1)])})}):null]},"media-"+c+"-container")}),j.jsx(b("CometFileSelector.react"),{accept:c,multiple:!0,onFilesSelected:v,children:function(a){return r&&o?j.jsx("div",{className:"k4urcfbm kr520xx4 j9ispegn pmk7jnqg pybr56ya datstx6m rsx06lma",children:j.jsxs(b("CometRow.react"),{align:"start",paddingTop:0,children:[j.jsx(b("CometRowItem.react"),{children:d.length===1?j.jsx(b("CometComposerEditMediaAttachmentItemButton.react"),{index:0}):j.jsx(b("ComposerCometOpenMediaDeepDiveButton.react"),{})}),j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("481773"),16),label:h._("Ajouter des photos\/vid\u00e9os"),onPress:a,type:"overlay"})})]})}):null}})]})}e.exports=a}),null);